<app-inner-page-layout [title]="headInformation.title">
    <ng-container>

        <div class="inner-wrapper w-full p-1 lg:p-5">
            <mat-accordion *ngIf="excelErrors" class="accordion" multi>
                <mat-expansion-panel class="border-b border-gray-300 mx-3" *ngFor="let item of excelErrors">
                    <mat-expansion-panel-header>
                        <mat-panel-title class="flex items-center">
                            <mat-icon class="add mr-2">add_circle</mat-icon>
                            <mat-icon class="remove mr-2">remove_circle</mat-icon>
                            {{item.workSheetName}}
                        </mat-panel-title>

                    </mat-expansion-panel-header>

                    <div>
                        <mat-expansion-panel class="border-t border-gray-300 mx-3" *ngFor="let child of item.recordsValidationResults">
                            <mat-expansion-panel-header>
                                <mat-panel-title class="flex items-center">
                                    <mat-icon class="add mr-2">add_circle</mat-icon>
                                    <mat-icon class="remove mr-2">remove_circle</mat-icon> {{child.key}} (Record index: {{child.recordIndex}})
                                </mat-panel-title>

                            </mat-expansion-panel-header>

                            <div class="pl-3"><div *ngFor="let message of child.messages">{{message}}</div></div>

                        </mat-expansion-panel>

                    </div>

                </mat-expansion-panel>
                
            </mat-accordion>
            <div *ngIf="!excelErrors">There is no sheet uploaded.</div>
            <div class="flex justify-end items-center mt-3 "><button
                    routerLink="/assigned-profiles" class="
                bg-gray-300
                hover:bg-gray-400
                text-gray-800
                font-bold
                py-2
                px-4
                rounded
              ">Cancel</button>
                <div class="ml-4"><button mat-flat-button color="warn" (click)="openUploadModal()">{{excelErrors ? 'Reupload' : 'Upload'}}</button>
                </div>
            </div>
        </div>
    </ng-container>
</app-inner-page-layout>